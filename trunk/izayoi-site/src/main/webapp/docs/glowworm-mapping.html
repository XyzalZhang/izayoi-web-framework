<!--
  ~ The contents of this file are subject to the Mozilla Public License
  ~ Version 1.1 (the "License"); you may not use this file except in compliance
  ~ with the License. You may obtain a copy of the License at
  ~
  ~ http://www.mozilla.org/MPL/
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF
  ~
  ~ ANY KIND, either express or implied. See the License for the specific language governing rights and
  ~
  ~ limitations under the License.
  ~
  ~ The Original Code is the IZAYOI web framework.
  ~
  ~ The Initial Developer of the Original Code is
  ~
  ~   Mo Chen <withinsea@gmail.com>
  ~
  ~ Portions created by the Initial Developer are Copyright (C) 2009-2010
  ~ the Initial Developer. All Rights Reserved.
  -->


<h2>glowworm name mapping</h2>

<div class="text">
    <div>
        <h3></h3>

        <p>
            glowworm 认为具有如下形式文件名的文件是一个数据描述文件：
        </p>
        <blockquote>
            原始文件名 + glowworm后缀 + 任意字符 + 类型扩展名
        </blockquote>
        <p>
            例如：用户请求 http://yourhost/index.html，原始文件名为 index.html，默认的后缀为 .gw (你可以更改这个后缀，参见
            <a href="#glowworm-config">custom configuration</a>），默认的合法类型扩展名包括 json, js, properties, jsp, mvel2, txt。则
            index.html.gw.json, index.html.gw-01.jsp, index.html.gw-blahblah.mvel2 等均为合法的数据描述文件名。
        </p>

        <p>
            （注：原始文件名只是用户请求地址的一部分，服务器上并不一定存在该名称的文件，由其它框架根据地址生成也是可以的。）
        </p>

        <p>
            glowworm 根据名称进行的映射有如下两种：
        </p>

        <h3>Auto mapping from orginal path to datafile</h3>

        <p>
            用户请求原始文件，glowworm 按文件的自然顺序依次查找数据文件目录（缺省为原始文件同目录）中的文件，碰到的第一个符合原始文件名的数据描述文件，即被用来生成对象注入到请求上下文中。
        </p>

        <p>
            例如，webapp 根目录下存在 index.jsp.gw-01.json, index.html.gw-01.json, index.html.gw-02.json，用户请求 /index.html，则
            glowworm 将选择 index.html.gw-01.json 作为数据文件。
        </p>

        <h3>Direct access to datafile</h3>

        <p>
            同一原始文件存在多个合法的数据文件时，自动映射会选择自然顺序的第一个；如果用户想要指定某个特定的数据文件，直接请求该文件即可。
        </p>

        <p>
            例如上例中，用户直接访问 /index.html.gw-02.json，则 glowworm 根据 index.html.gw-02.json 生成数据注入到请求上下文，然后将请求转发回 index.html
            以正常生成页面。
        </p>
    </div>
</div>

<a class="download"
   href="http://izayoi-web-framework.googlecode.com/files/glowworm-tutorial-mapping-injectors-0.1.0-beta.war">
    download demo for this tutorial: glowworm-tutorial-mapping-injectors-0.1.0-beta.war
</a>

